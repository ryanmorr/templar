/*! templar v1.0.0 | https://github.com/ryanmorr/templar */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).templar=e()}}(function(){return function i(u,a,l){function f(t,e){if(!a[t]){if(!u[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};u[t][0].call(o.exports,function(e){return f(u[t][1][e]||e)},o,o.exports,i,u,a,l)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<l.length;e++)f(l[e]);return f}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./binding"))&&r.__esModule?r:{default:r},u=e("./parser"),a=e("./util");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function i(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=f(this,s(i).call(this,e,r))).node=t,o.attr=n,o.value=null,o}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,o.default),t=i,(n=[{key:"render",value:function(){c(s(i.prototype),"render",this).call(this);var e=this.value;this.value=(0,u.interpolate)(this.text,this.tpl.data).trim(),(0,a.updateAttribute)(this.node,this.attr,this.value),this.tpl.events.emit("attributechange",this.node,e,this.value)}}])&&l(t.prototype,n),r&&l(t,r),i}();n.default=p,t.exports=n.default},{"./binding":2,"./parser":7,"./util":9}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("./util");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.tpl=e,this.text=t}var e,t,r;return e=n,(t=[{key:"setTokens",value:function(e){this.tokens=e}},{key:"shouldUpdate",value:function(){var t=this;return this.tokens.every(function(e){return e in t.tpl.data})}},{key:"update",value:function(){this.renderer||(this.renderer=this.render.bind(this),(0,o.scheduleRender)(this.renderer))}},{key:"render",value:function(){this.renderer=null}}])&&i(e.prototype,t),r&&i(e,r),n}();n.default=r,t.exports=n.default},{"./util":9}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./binding"))&&r.__esModule?r:{default:r},u=e("./util");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=function(e){function i(e,t,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(o=l(this,c(i).call(this,e,r))).node=t,o.type=n,o.node["on"+n]=null,o.node.removeAttribute("on"+n),o.value=null,o}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,o.default),t=i,(n=[{key:"render",value:function(){f(c(i.prototype),"render",this).call(this);var e=this.value,t=this.tpl.data[this.tokens[0]];t!==this.value&&(this.value&&(this.node.removeEventListener(this.type,this.value),this.value=null),(0,u.isFunction)(t)&&(this.node.addEventListener(this.type,t),this.value=t,this.tpl.events.emit("attributechange",this.node,e,this.value)))}}])&&a(t.prototype,n),r&&a(t,r),i}();n.default=d,t.exports=n.default},{"./binding":2,"./util":9}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("./util");function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=(0,o.hashmap)()}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){var n=this.events[e];void 0===n&&(n=[],this.events[e]=n),n.push(t)}},{key:"remove",value:function(e,t){var n=this.events[e];if(void 0!==n)for(var r=0,o=n.length;r<o;r++)if(n[r]===t)return void n.splice(r,1)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.events[e];void 0!==o&&o.length&&o.forEach(function(e){return e.apply(void 0,n)})}}])&&i(t.prototype,n),r&&i(t,r),e}();n.default=r,t.exports=n.default},{"./util":9}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){return new o.default(e,t)};var r,o=(r=e("./templar"))&&r.__esModule?r:{default:r};t.exports=n.default},{"./templar":8}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(e("./templar")),o=r(e("./binding")),l=e("./parser"),f=e("./util");function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=s(this,p(u).call(this,e,t.data))).nodes=[t],n}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,o.default),t=u,(n=[{key:"purge",value:function(){this.nodes.forEach(function(e){if(e instanceof a.default)e.unmount();else{var t=e.parentNode;t&&t.removeChild(e)}})}},{key:"render",value:function(){d(p(u.prototype),"render",this).call(this);var t=[],e=this.nodes[0],n=(0,f.getParent)(e),r=(0,f.getNodeIndex)(n,e),o=n.childNodes;this.purge();var i=(0,l.interpolateDOM)(this.text,this.tpl.data,function(e){e instanceof a.default&&(e.root=n),11===e.nodeType?t.push.apply(t,e.childNodes):t.push(e)});this.nodes=t,r in o?n.insertBefore(i,o[r]):n.appendChild(i),this.tpl.events.emit("change",n)}}])&&c(t.prototype,n),r&&c(t,r),u}();n.default=u,t.exports=n.default},{"./binding":2,"./parser":7,"./templar":8,"./util":9}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.interpolate=function(e,n){return e.replace(i,function(e,t){return O(t,n)})},n.interpolateDOM=function(e,o,i){var u=document.createDocumentFragment();return(0,l.getMatches)(c,e,function(e){var t;if(null!=e[1]){var n=e[1],r=!1;switch("&"===n[0]&&(r=!0,n=n.substr(1)),f(t=O(n,o))){case"string":if(!r&&(0,l.isHTML)(t)){t=(0,l.parseHTML)(t);break}case"number":case"boolean":t=document.createTextNode((0,l.escapeHTML)(t));break;default:t instanceof a.default&&t.mount(u)}}else null!=e[2]&&(t=document.createTextNode(e[2]));null!=t&&(i(t),t.nodeName&&u.appendChild(t))}),u},n.parseTemplate=function f(c,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:(0,l.hashmap)();return Array.from(e).reduce(function(e,t){if(3===t.nodeType){if(m(t.data)){var n=new s.default(c,t);g(e,t.data,n)}}else if(1===t.nodeType){for(var r=0,o=t.attributes.length;r<o;r++){var i=t.attributes[r],u=i.name,a=i.value;if(m(a)){var l="o"===u[0]&&"n"===u[1]?new p.default(c,t,u.slice(2).toLowerCase(),a):new d.default(c,t,u,a);g(e,a,l)}}t.hasChildNodes()&&f(c,t.childNodes,e)}return e},t)};var a=r(e("./templar")),s=r(e("./node-binding")),d=r(e("./attr-binding")),p=r(e("./event-binding")),l=e("./util");function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=/\{\{\s*\&?(.+?)\s*\}\}/g,c=/\{\{\s*(.+?)\s*\}\}|((?:(?!(?:\{\{\s*(.+?)\s*\}\})).)+)/g,u=/^\&?[A-Za-z0-9_]+$/,h=/"[^"]*"|'[^']*'|\/([^/]+)\/|true|false/g,v=/[a-zA-Z_]\w*([.][a-zA-Z_]\w*)*/g,y=/^([^.]+)/,b=(0,l.hashmap)();function m(e){return-1!==e.indexOf("{{")}function g(r,e,o){(0,l.getMatches)(i,e,function(e){var t=e[1],n=(t.replace(h,"").match(v)||[]).reduce(function(e,t){return t=t.match(y)[1],-1===e.indexOf(t)&&e.push(t),e},[]);o.setTokens(n),u.test(t)||function(e,t){if(!(e in b)){var n="return ".concat(e,";");if(t.length){var r=t.map(function(e){return"".concat(e," = this['").concat(e,"']")});n="var ".concat(r.join(","),"; ").concat(n)}b[e]=new Function(n)}}(t,n),n.forEach(function(e){e in r||(r[e]=[]),r[e].push(o)})})}function O(e,t){return e in b?b[e].call(t):t[e]}},{"./attr-binding":1,"./event-binding":3,"./node-binding":6,"./templar":8,"./util":9}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("./event-emitter"))&&r.__esModule?r:{default:r},i=e("./parser"),u=e("./util");function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.id=(0,u.uid)();var n=(0,u.parseHTML)(e);this.root=this.frag=(0,u.wrapFragment)(n,this.id),this.bindings=(0,i.parseTemplate)(this,n.childNodes),this.events=new o.default,this.data=(0,u.hashmap)(),this.mounted=!1,t&&this.set(t)}var e,t,n;return e=r,(t=[{key:"mount",value:function(e){return this.isMounted()&&this.unmount(),e.appendChild(this.frag),this.root=e,this.mounted=!0,this.events.emit("mount",e),this}},{key:"unmount",value:function(){var t=this;return this.isMounted()&&((0,u.getTemplateNodes)(this.getRoot(),this.id).forEach(function(e){t.frag.appendChild(e)}),this.root=this.frag,this.mounted=!1,this.events.emit("unmount")),this}},{key:"get",value:function(e){return e in this.data?this.data[e]:null}},{key:"set",value:function(t,e){var n=this;if("string"==typeof t){if(this.data[t]=e,t in this.bindings){var r=document.contains(this.getRoot())?"update":"render";this.bindings[t].forEach(function(e){e.shouldUpdate()&&e[r]()})}return this}Object.keys(t).forEach(function(e){return n.set(e,t[e])})}},{key:"on",value:function(e,t){var n=this;return this.events.on(e,t),function(){return n.events.remove(e,t)}}},{key:"query",value:function(e){return Array.from(this.getRoot().querySelectorAll(e))}},{key:"getRoot",value:function(){return this.root}},{key:"isMounted",value:function(){return this.mounted}}])&&a(e.prototype,t),n&&a(e,n),r}();n.default=l,t.exports=n.default},{"./event-emitter":4,"./parser":7,"./util":9}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hashmap=function(){return Object.create(null)},n.getMatches=function(e,t,n){var r;e.global&&(e.lastIndex=0);for(;r=e.exec(t);)n(r)},n.isFunction=function(e){return"[object Function]"==={}.toString.call(e)},n.isHTML=function(e){return f.test(e)},n.escapeHTML=function(e){return null!=e?"string"!=typeof e?e:e.replace(c,function(e){return s[e]||""}):""},n.parseHTML=function(e){if(d){var t=document.createElement("template");return t.innerHTML=e,document.importNode(t.content,!0)}var n=document.createDocumentFragment(),r=document.createElement("div");r.innerHTML=e;for(;r.firstChild;)n.appendChild(r.firstChild);return n},n.uid=function(){return Math.floor(65536*(u+++Math.random())).toString(16).substring(1)},n.getNodeIndex=function(e,t){if(t instanceof i.default){var n=0,r=t;for(t=e.firstChild;t;){if(t.templar===r.id)return n;t=t.nextSibling,n++}return 0}return l.call(e.childNodes,t)},n.getParent=function(e){if(e instanceof i.default)return e.getRoot();return e.parentNode},n.wrapFragment=function(e,t){var n=document.createTextNode(""),r=document.createTextNode("");return n.templar=r.templar=t,e.insertBefore(n,e.firstChild),e.appendChild(r),e},n.getTemplateNodes=function(e,t){var n=[],r=e.firstChild,o=!1;for(;r;)r.templar!==t||o?r.templar===t&&o&&(o=!1,n.push(r)):o=!0,o&&n.push(r),r=r.nextSibling;return n},n.updateAttribute=function(e,t,n){switch(o=n,n="true"===o||"false"!==o&&("null"!==o?"undefined"!==o?o:void 0:null),t){case"class":e.className=n;break;case"style":e.style.cssText=n;break;case"value":var r=e.tagName.toLowerCase();if("input"===r||"textarea"===r){e.value=n;break}default:t in e?e[t]=null==n?"":n:null!=n&&!1!==n&&e.setAttribute(t,n),null!=n&&!1!==n||e.removeAttribute(t)}var o},n.scheduleRender=function(e){o||(o=requestAnimationFrame(p));a.push(e)};var r,o,i=(r=e("./templar"))&&r.__esModule?r:{default:r};var u=1,a=[],l=[].indexOf,f=/<[a-z][\s\S]*>/,c=/[<>&"']/g,s={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&#39;","'":"&quot;"},d="content"in document.createElement("template");function p(){for(o=null;a.length;)a.pop()()}},{"./templar":8}]},{},[5])(5)});
//# sourceMappingURL=templar.min.js.map
